<script src="../d3/d3.js"></script>

<link rel="import" href="plutonium-visualization-fetching-behavior.html">

<script>
    window.PlutoniumVisualization = window.PlutoniumVisualization || {};
    /**
     * Behavior for fetching model from JSON from an URL.
     *
     * @polymerBehavior
     */
    PlutoniumVisualization.JsonFetchingBehaviorImp = {
        properties: {
            jsonUrl: {
                type: String,
                notify: true
            }
        },
        observers: [
            'observeJsonUrl(jsonUrl)'
        ],
        /**
         * Observe `data` object..
         *
         * @param {string} Label expression.
         * @param {function} Function to generate D3 layout.
         * @param {Object} Model object.
         */
        observeJsonUrl: function (jsonUrl) {
            console.log(this.is, ' use JSON model from: ', jsonUrl);
            this.fire('plutonium-fetch', {
                url: jsonUrl
            });
        },
        _fetch: function (jsonUrl, postFetch) {
            d3.json(jsonUrl, postFetch);
        }

    };

    /**
     * Behavior for fetching model from JSON from an URL.
     *
     * @polymerBehavior
     */
    PlutoniumVisualization.JsonFetchingBehavior = [PlutoniumVisualization.FetchingBehavior, PlutoniumVisualization.JsonFetchingBehaviorImp];
</script>